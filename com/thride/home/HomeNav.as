package com.thride.home{		import flash.display.Loader;	import flash.display.MovieClip;	import flash.display.Sprite;		import flash.events.Event;	import flash.events.MouseEvent;		import flash.net.URLRequest;		import flash.geom.Point;			import flash.text.TextField;	import flash.text.TextFieldAutoSize;		import flash.geom.Rectangle;		import gs.TweenLite;	import gs.easing.*;	//TweenLite.to(mc, 1, {x:46, y:43, scaleX:1, scaleY:1, rotation:0, alpha:1, tint:0x3399ff, ease:Elastic.easeOut, onComplete:FunctionName });			public class HomeNav extends MovieClip	{		public var id:String;				public var isOpen:Boolean;		public var isOver:Boolean;		public var isRollOut:Boolean = true;				public var maskClip:MovieClip;		public var darkClip:MovieClip;		public var imgClip:Sprite;		public var rollClip:MovieClip;				private var dataList:XMLList;				private static const DARKALPHA:Number = .7;				public function HomeNav()		{						addEventListener(Event.ADDED_TO_STAGE, onAdded);		}						private function initImage(titlesrc:String){						var titlegfx:Loader = new Loader();			titlegfx.contentLoaderInfo.addEventListener(Event.COMPLETE, animImg);			titlegfx.load(new URLRequest(titlesrc));		}						////////////////////////////////////////////////IMG		private function animImg(e:Event)		{									//imgClip = new Sprite();			//addChild(imgClip);			imgClip = getChildByName("imgdyn") as Sprite;			imgClip.addChild(e.currentTarget.content);			//imgClip.mask = maskClip;			darkClip.alpha = 0;			if(imgClip.width > (darkClip.width+20)) panImage();		}				public function panImage(){			TweenLite.killTweensOf(imgClip);						var animImgBack:Function = function(){				TweenLite.to(imgClip, 4, {x:0, ease:Strong.easeInOut});			}			TweenLite.to(imgClip, 4, {x:-(imgClip.width - (darkClip.width+5)), ease:Strong.easeInOut, onComplete:animImgBack});		}						public function darkness(goDark:Boolean)		{						TweenLite.killTweensOf(darkClip);			TweenLite.to(darkClip, 1, {alpha:(goDark ? DARKALPHA : 0), ease:Strong.easeOut});		}				public function overAnim()		{			if(!isOpen){				darkness(true);			}		}		public function outAnim()		{			isOpen = false;			darkness(false);		}				public function openAnim()		{				isOpen = true;							    if(!isRollOut){					panImage();				} else {					this.gotoAndStop("open");					var a:String = "roll_"+this.name;					rollClip = this.getChildByName(a) as MovieClip;					rollClip.datalist = dataList;					rollClip.init();				}		}				public function closeAnim(){			isOpen = false;			this.gotoAndStop(1);		}				//////////GETSET				public function set datalist(xml:XMLList)		{			dataList = xml;			if(dataList.@isRollOut == "false"){				isRollOut = false;				initImage(dataList.@asset);				if(dataList.@deeplink){					id = dataList.@deeplink;				}			} else {				isRollOut = true;				if(dataList.@deeplink){					id = dataList.@deeplink;				}			}		}				////////CONSTRUCT				private function onAdded(e:Event)		{			maskClip = this.getChildByName("maskclip") as MovieClip;			darkClip = this.getChildByName("dark") as MovieClip;						if(maskClip) maskClip.alpha = 0;			if(darkClip) darkClip.alpha = 0;			this.stop();		}			}}